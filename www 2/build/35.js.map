{"version":3,"sources":["../../src/pages/giftcard-banner/giftcard-banner.module.ts","../../src/pages/giftcard-banner/giftcard-banner.ts"],"names":[],"mappings":"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","file":"35.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { GiftcardBannerPage } from './giftcard-banner';\n\n@NgModule({\n  declarations: [\n    GiftcardBannerPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(GiftcardBannerPage),\n  ],\n})\nexport class GiftcardBannerPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/giftcard-banner/giftcard-banner.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams ,LoadingController,AlertController,ModalController} from 'ionic-angular';\nimport { GlobalVariable } from '../../app/global';\nimport { ServerProvider } from '../../providers/server/server';\n\n@IonicPage()\n@Component({\n  selector: 'page-giftcard-banner',\n  templateUrl: 'giftcard-banner.html',\n})\nexport class GiftcardBannerPage {\nbanner:any;\ncard_banner:any;\ndesign_id:any;\ngifts:any;\namount:any;\notherselected:boolean = false;\ncard_id:any;\nmessage:any;\npolicy:any;\n  constructor(public modalCtrl:ModalController,public alertCtrl:AlertController,public loadingCtrl: LoadingController, public server: ServerProvider, public global: GlobalVariable,public navCtrl: NavController, public navParams: NavParams) {\n   this.card_banner =  this.navParams.get('banner');\n   this.get_gift_cards();\n   this.design_id = this.card_banner.design_id;\n  }\n  buy(id){\n    this.otherselected = false;\n    this.card_id = id;\n\n  }\n  otherselect(){\n    this.otherselected = true;\n  }\n\n\n\nget_gift_cards() {\n  let loading = this.loadingCtrl.create({\n      content: \"Loading...\",\n  });\n  loading.present();\n\n  let response = this.server.gift_cards();\n  response.subscribe(data => {\n      this.gifts = data.giftcards;\n      this.policy = data.policy;\n      loading.dismiss();\n  \n  }, error => {\n      loading.dismiss();\n      this.global.alertMessage(\"Failure\",\"Something went wrong check your internet connection.\")\n\n  });\n}\n\nshowConfirm(id) {\n  const confirm = this.alertCtrl.create({\n    title: 'Gift Card',\n    message: 'Do you want to buy it for yourself or want to share?',\n    buttons: [\n      {\n        text: 'Buy',\n        handler: () => {\n           this.navCtrl.push('BuygiftcardsPage',{gift_id:id,udid_r:this.global.udid,design_id:this.design_id,amount:this.amount,message:this.message});   \n        }\n      },\n      {\n        text: 'Share',\n        handler: () => {\n          this.share_(id);\n        }\n      }\n    ]\n  });\n  confirm.present();\n}\n\n\n\nshare_(id){\n  const prompt = this.alertCtrl.create({\n      title: 'Share',\n      message: \"Enter email of you friend\",\n      inputs: [\n        {\n          name: 'email',\n          type:'text',\n          placeholder: 'Email'\n        },\n      ],\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: data => {\n            console.log('Cancel clicked');\n          }\n        },\n        {\n          text: 'Send',\n          handler: data => {\n            this.search_user(data.email,id);\n          }\n        }\n      ]\n    });\n    prompt.present();\n}\n\n\nshowConfirm_new_user(email,id) {\n  const confirm = this.alertCtrl.create({\n    title: 'OOPS!',\n    message: 'Your friend is not registered member at our place.Please set up your friends profile.',\n    buttons: [\n      {\n        text: 'Cancel',\n        \n        handler: () => {\n        }\n      },\n      {\n        text: 'Continue',\n        handler: () => {\n          this.showPrompt_craete_user(email,id)\n        }\n      }\n    ]\n  });\n  confirm.present();\n}\n\nsearch_user(email,id){\n  if(!this.validateEmail(email)){\n    this.global.presentToast(\"Invalid Email Format.\")\n  }\n  else{\n    let loading = this.loadingCtrl.create({\n      content: \"Loading...\",\n  });\n  loading.present();\n\n  let response = this.server.search_user(email);\n  response.subscribe(data => {\n      if(data.length == 0){\n      this.showConfirm_new_user(email,id)\n\n      }\n      else{\n          this.navCtrl.push('BuygiftcardsPage',{gift_id:id,udid_r:data[0].udid,design_id:this.design_id,amount:this.amount,message:this.message}); \n      }\n      loading.dismiss();\n  \n  }, error => {\n      loading.dismiss();\n      this.global.alertMessage(\"Failure\",\"Something went wrong check your internet connection.\")\n\n  });\n  }\n \n}\n\ncreate_new(email,fname,lname,id){\n  let loading = this.loadingCtrl.create({\n    content: \"Loading...\",\n  });\n  loading.present();\n\n  let response = this.server.craete_user(email,fname,lname);\n  response.subscribe(data => {\n     if(data.status == true){\n      this.navCtrl.push('BuygiftcardsPage',{gift_id:id,udid_r:data.udid,design_id:this.design_id,amount:this.amount,message:this.message}); \n\n     }\n     else{\n      this.global.alertMessage(\"Failure\",\"Error in creating new user.\")\n\n     }\n      loading.dismiss();\n\n  }, error => {\n      loading.dismiss();\n      this.global.alertMessage(\"Failure\",\"Something went wrong check your internet connection.\")\n\n  });\n}\n\nshowPrompt_craete_user(email,id) {\n  var bool = true;\n  const prompt = this.alertCtrl.create({\n    title: 'Create Account',\n    message: \"Enter your friend details of email \" + email,\n    inputs: [\n      \n      {\n        name: 'fname',\n        placeholder: 'First Name'\n      },\n      {\n        name: 'lname',\n        placeholder: 'Last Name'\n      },\n    ],\n    buttons: [\n      {\n        text: 'Cancel',\n        handler: data => {\n          console.log('Cancel clicked');\n        }\n      },\n      {\n        text: 'Create',\n        handler: data => {\n          this.create_new(email,data.fname,data.lname,id)\n        }\n      }\n    ]\n  });\n  prompt.present();\n}\n\nvalidateEmail(email) {\n  var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(String(email).toLowerCase());\n}\n\nproceed(){\n  if(Number(this.amount) > 0 && Number(this.amount) <= this.global.giftcard_amount_limit){\n    if(this.otherselected){\n      this.showConfirm('');\n  \n    }\n    else{\n      this.showConfirm(this.card_id);\n  \n    }\n  }\n  else{\n    this.global.presentToast(\"Enter Amount in Range 1-\" + this.global.giftcard_amount_limit)\n  }\n \n}\n\ntermsandconditions(){\n  let modal = this.modalCtrl.create('GiftcardTermsandconditionsPage',{policy:this.policy});\n  modal.present();\n}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/giftcard-banner/giftcard-banner.ts"],"sourceRoot":""}