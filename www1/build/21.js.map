{"version":3,"sources":["../../src/pages/order-placed-detail/order-placed-detail.module.ts","../../src/pages/order-placed-detail/order-placed-detail.ts"],"names":[],"mappings":"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","file":"21.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { OrderPlacedDetailPage } from './order-placed-detail';\n\n@NgModule({\n  declarations: [\n    OrderPlacedDetailPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(OrderPlacedDetailPage),\n  ],\n})\nexport class OrderPlacedDetailPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-placed-detail/order-placed-detail.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController, LoadingController, AlertController } from 'ionic-angular';\nimport { ServerProvider } from '../../providers/server/server';\nimport { GlobalVariable } from '../../app/global';\n\n/**\n * Generated class for the OrderPlacedDetailPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n    selector: 'page-order-placed-detail',\n    templateUrl: 'order-placed-detail.html',\n})\nexport class OrderPlacedDetailPage {\n    o_id: any;\n    tot: any;\n    res_name: any;\n    orders: any;\n    schedule_time: any;\n    instructions: any;\n    time: any;\n    total_price_with_extras: number;\n    total_price: number;\n    userChoices: any = []\n    categories: any;\n    category: any;\n    object: any;\n    payment_type:any;\n    constructor(public globals: GlobalVariable, public alertCtrl: AlertController, public loadingCtrl: LoadingController, public server: ServerProvider, public viewCtrl: ViewController, public navCtrl: NavController, public navParams: NavParams) {\n        this.orders = navParams.get('data');\n        this.time = navParams.get('time');\n        this.instructions = navParams.get('instructions');\n        console.log(this.instructions)\n        this.schedule_time = navParams.get('schedule_time');\n        this.res_name = navParams.get('res');\n        this.tot = navParams.get('tot');\n        this.o_id = navParams.get('o_id');\n        this.payment_type = navParams.get('p_type');\n        console.log(\"payment type\",this.payment_type)\n    } \n  \n    ionViewDidLoad() {\n        console.log('ionViewDidLoad OrderPlacedDetailPage');\n    }\n\n    close() {\n        this.viewCtrl.dismiss();\n\n    }\n    ReorderVerificationPrompt(orderdata) {\n\n        let prompt = this.alertCtrl.create({\n            title: 'Alert',\n            message: \"Your reorder will be placed in your cart. Click the cart icon to proceed with your order.\",\n            buttons: [\n                {\n                    text: 'Cancel',\n                    handler: data => {\n                        console.log('Cancel clicked');\n                    }\n                },\n                {\n                    text: 'Okay',\n                    handler: data => {\n\n                        console.log('OK clicked',orderdata);\n                        orderdata = orderdata.filter(function(item) {\n                            return item.reward === false;\n                          });\n                        this.globals.Product = orderdata;\n                        this.navCtrl.popToRoot();\n\n                        // this.Categories(orderdata);\n\n                    }\n                }\n            ]\n        });\n        prompt.present();\n    }\n\n\n\n    Categories(orderdata) {\n        let loading = this.loadingCtrl.create({\n            content: \"loading...\",\n\n        });\n        loading.present();\n        console.log(orderdata);\n\n        let response = this.server.GetBusinessMenuCategories(orderdata[0].restId);\n        response.subscribe(data => {\n            var res = data;\n            console.log(res);\n            loading.dismiss();\n            // console.log(this.data.categories);\n            this.category = res.categories;\n            console.log(\"data\", this.category);\n            //this.userChoices.length = 0;\n            orderdata.forEach(userdata => {\n\n                console.log(userdata);\n                this.category.forEach(element => {\n                    console.log(userdata.menuItem, element, element.tax);\n                    this.globals.tax = element.tax;\n                    element.items.forEach(subelement => {\n\n                        if (userdata.menuItem == subelement.name) {\n                            if (userdata.menuExtrasSelected.length == 0) {\n                                console.log(userdata.quantity, userdata.restId);\n\n                                let total_price = Number(userdata.quantity) * Number(subelement.price);\n                                console.log(this.globals.Product);\n                                if(userdata.reward == false){\n                                    this.globals.Product.push({ menuId: \"1\", restId: userdata.restId, uniqueId: \"1\", menuItem: subelement.name, image: subelement.image, quantity: userdata.quantity, basePrice: Number(subelement.price), totalPrice: Number(total_price), menuExtrasSelected: [] });\n                                }\n                                console.log(\"global product\",this.globals.Product);\n                                this.navCtrl.popToRoot();\n                            }\n                            else {\n                                console.log(userdata.menuExtrasSelected, subelement);\n                                console.log(\"else\");\n\n                                this.total_price_with_extras = Number(userdata.quantity) * Number(subelement.price);\n                                console.log(\"global product\",this.globals.Product);\n                                this.getExtras(subelement.id, userdata.menuExtrasSelected);\n\n                                if(userdata.reward == false){\n                                    this.globals.Product.push({ menuId: \"1\", restId: userdata.restId, uniqueId: \"1\", menuItem: subelement.name, image: subelement.image, quantity: userdata.quantity, basePrice: Number(subelement.price), totalPrice: Number(this.total_price_with_extras), menuExtrasSelected: this.userChoices });\n                                }\n                                console.log(\"global product\",this.globals.Product);\n                                this.navCtrl.popToRoot();\n                                \n                            }\n                        }\n\n                    });\n                });\n            });\n\n            //console.log(\"data1\",this.data);\n\n            // console.log(this.data.restaurant.categories);\n            // console.log(this.category);\n        }\n            , error => {\n                console.log(error);\n                loading.dismiss();\n                let alert = this.alertCtrl.create({\n                    title: 'Error',\n                    subTitle: 'Server times out, please try again',\n                    buttons: ['OK']\n                });\n                alert.present();\n\n            });\n    }\n\n    getExtras(ItemId, userExtras) {\n\n        let response = this.server.ProductItemDetail(ItemId);\n\n        response.subscribe(data => {\n            console.log(data.item.extras);\n            console.log(userExtras);\n\n            userExtras.forEach(userextra_element => {\n                console.log(userextra_element);\n\n                data.item.extras.forEach(data_extra_element => {\n                    console.log(data.item.extras);\n                    console.log(userextra_element.optionNameSelected);\n\n                    userextra_element.optionNameSelected.forEach(user_option_element => {\n\n                        data_extra_element.options.forEach(data_option_element => {\n                            if (user_option_element.name == data_option_element.name) {\n\n                                this.total_price_with_extras += user_option_element.quantity * Number(data_option_element.price);\n                                var data = { heading: data_extra_element.heading, optionNameSelected: [{ name: data_option_element.name, price: Number(data_option_element.price), quantity: user_option_element.quantity, total: Number(data_option_element.price) * user_option_element.quantity, isFree: false }] }\n                                console.log(data);\n                                this.userChoices.push(data);\n                                console.log(this.userChoices);\n                            }\n                        });\n                    });\n\n                });\n            });\n        }\n            , error => {\n                console.log(error);\n                let alert = this.alertCtrl.create({\n                    title: 'Error',\n                    subTitle: 'Server times out, please try again',\n                    buttons: ['OK']\n                });\n                alert.present();\n            });\n\n    }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-placed-detail/order-placed-detail.ts"],"sourceRoot":""}